#include "ostask_controller_module_port.h"

#include "port_can.h"


void controllerModulePortTask(void *argument) {
    PortCAN::init(0x061A);

    uint8_t expire_1_data[18] = {0x5A, 0xF0, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x01, 0x6E, 0xE8, 0x03, 0x00, 0x00, 0xB7, 0xB9};
    uint8_t expire_2_data[18] = {0x5A, 0xF0, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x01, 0x01, 0x6E, 0xD0, 0x07, 0x00, 0x00, 0xFC, 0x73};
    uint8_t vx_p10_data[26] = {0x5A, 0xF0, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x01, 0x0B, 0x00, 0x00, 0x20, 0x41, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0, 0xBD};
    uint8_t vx_n10_data[26] = {0x5A, 0xF0, 0x00, 0x00, 0x00, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x01, 0x0B, 0x00, 0x00, 0x20, 0xC1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x77, 0x79};

    PortCAN::sendBytes(expire_2_data, sizeof(expire_2_data));
    osDelay(1000);

    while (true) {
        PortCAN::sendBytes(vx_p10_data, sizeof(vx_p10_data));
        osDelay(1000);
        PortCAN::sendBytes(vx_n10_data, sizeof(vx_n10_data));
        osDelay(1000);
    }
}
